@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
	--color-background: var(--background);
	--color-foreground: var(--foreground);
	--font-sans: var(--font-chakra);
	--font-mono: var(--font-tech-mono);
	--color-sidebar-ring: var(--sidebar-ring);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-ring: var(--ring);
	--color-input: var(--input);
	--color-border: var(--border);
	--color-destructive: var(--destructive);
	--color-accent-foreground: var(--accent-foreground);
	--color-accent: var(--accent);
	--color-muted-foreground: var(--muted-foreground);
	--color-muted: var(--muted);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-secondary: var(--secondary);
	--color-primary-foreground: var(--primary-foreground);
	--color-primary: var(--primary);
	--color-popover-foreground: var(--popover-foreground);
	--color-popover: var(--popover);
	--color-card-foreground: var(--card-foreground);
	--color-card: var(--card);
	--radius-sm: calc(var(--radius) - 4px);
	--radius-md: calc(var(--radius) - 2px);
	--radius-lg: var(--radius);
	--radius-xl: calc(var(--radius) + 4px);

	--animate-slide-down-fade: slide-down-fade 0.3s ease-out forwards;

	@keyframes slide-down-fade {
		from {
			opacity: 0;
			transform: translateY(-4px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* Hero background animations */
	--animate-scan-vertical: scan-vertical 4s linear infinite;
	--animate-float-particle: float-particle 15s ease-in-out infinite;
	--animate-draw-line: draw-line 2s ease-out forwards;
	--animate-pulse-slow: pulse-slow 4s ease-in-out infinite;
	--animate-typewriter: typewriter 3s steps(20) forwards;
	--animate-blink-caret: blink-caret 0.75s step-end infinite;
	--animate-glitch: glitch 0.3s ease-in-out;
	--animate-target-spin: target-spin 8s linear infinite;

	@keyframes scan-vertical {
		0% {
			transform: translateY(-100%);
			opacity: 0;
		}
		10% {
			opacity: 1;
		}
		90% {
			opacity: 1;
		}
		100% {
			transform: translateY(100vh);
			opacity: 0;
		}
	}

	@keyframes float-particle {
		0%,
		100% {
			transform: translateY(0) translateX(0);
			opacity: 0.3;
		}
		25% {
			transform: translateY(-20px) translateX(10px);
			opacity: 0.6;
		}
		50% {
			transform: translateY(-10px) translateX(-5px);
			opacity: 0.4;
		}
		75% {
			transform: translateY(-30px) translateX(15px);
			opacity: 0.5;
		}
	}

	@keyframes draw-line {
		from {
			stroke-dasharray: 200;
			stroke-dashoffset: 200;
		}
		to {
			stroke-dashoffset: 0;
		}
	}

	@keyframes pulse-slow {
		0%,
		100% {
			opacity: 0.05;
			transform: scale(1);
		}
		50% {
			opacity: 0.1;
			transform: scale(1.05);
		}
	}

	@keyframes typewriter {
		from {
			width: 0;
		}
		to {
			width: 100%;
		}
	}

	@keyframes blink-caret {
		from,
		to {
			border-color: transparent;
		}
		50% {
			border-color: var(--primary);
		}
	}

	@keyframes glitch {
		0% {
			transform: translate(0);
		}
		20% {
			transform: translate(-2px, 2px);
		}
		40% {
			transform: translate(-2px, -2px);
		}
		60% {
			transform: translate(2px, 2px);
		}
		80% {
			transform: translate(2px, -2px);
		}
		100% {
			transform: translate(0);
		}
	}

	@keyframes target-spin {
		from {
			transform: rotate(0deg);
		}
		to {
			transform: rotate(360deg);
		}
	}
}

:root {
	--radius: 0rem; /* Sharp corners by default */
	--background: #0b0c15; /* Deep Space */
	--foreground: #e2e8f0; /* Light Gray */
	/* SURFACES (Vỏ giáp) */
	--card: #12141c; /* Dark Gunmetal */
	--card-foreground: #e2e8f0;
	--popover: #12141c;
	--popover-foreground: #e2e8f0;

	/* PRIMARY (Năng lượng chính - GN Particles) */
	--primary: #06b6d4;
	--primary-foreground: #000000;

	/* SECONDARY (Các chi tiết phụ khí tài) */
	--secondary: #1e293b;
	--secondary-foreground: #e2e8f0;

	/* MUTED (Thông số phụ) */
	--muted: #1e293b;
	--muted-foreground: #94a3b8;

	/* ACCENT (SỬA ĐỔI: Chuyển sang Vàng Gundam/Industrial Warning) */
	--accent: #ffd700;
	--accent-foreground: #000000;

	/* DESTRUCTIVE (SỬA ĐỔI: Đỏ Char Aznable - rực hơn một chút) */
	--destructive: #ff003c;
	--destructive-foreground: #ffffff;

	/* BORDERS & INPUTS (Panel Lines) */
	--border: #3f4152;
	--input: #1e293b;

	/* RING (Hiệu ứng phát sáng khi Focus) */
	--ring: #00e1ff;

	/* SIDEBAR (Buồng lái) */
	--sidebar: #0f111a;
	--sidebar-foreground: #e2e8f0;
	--sidebar-primary: #06b6d4;
	--sidebar-primary-foreground: #000000;
	--sidebar-accent: #1e293b;
	--sidebar-accent-foreground: #e2e8f0;
	--sidebar-border: #3f4152;
	--sidebar-ring: #00e1ff;
}

.dark {
	--background: #0b0c15;
	--foreground: #e2e8f0;
	--card: #12141c;
	--card-foreground: #e2e8f0;
	--popover: #12141c;
	--popover-foreground: #e2e8f0;
	--primary: #06b6d4;
	--primary-foreground: #000000;
	--secondary: #1e293b;
	--secondary-foreground: #e2e8f0;
	--muted: #1e293b;
	--muted-foreground: #94a3b8;
	--accent: #428bbc;
	--accent-foreground: #ffffff;
	--destructive: #ff003c;
	--destructive-foreground: #ffffff;
	--border: #2a2b36;
	--input: #1e293b;
	--ring: #00e1ff;
	--sidebar-foreground: #e2e8f0;
	--sidebar-primary: #06b6d4;
	--sidebar-primary-foreground: #000000;
	--sidebar-accent: #1e293b;
	--sidebar-accent-foreground: #e2e8f0;
	--sidebar-border: #2a2b36;
	--sidebar-ring: #00e1ff;
}

@utility clip-mecha {
	clip-path: polygon(
		0 0,
		calc(100% - 10px) 0,
		100% 10px,
		100% 100%,
		10px 100%,
		0 calc(100% - 10px)
	);
}

@utility clip-mecha-sm {
	clip-path: polygon(
		0 0,
		calc(100% - 4px) 0,
		100% 4px,
		100% 100%,
		4px 100%,
		0 calc(100% - 4px)
	);
}

@layer base {
	* {
		@apply border-border outline-ring/50;
	}
	.font-display {
		font-family: var(--font-chakra);
	}
	body {
		@apply bg-background text-foreground;
	}
	button {
		@apply not-disabled:cursor-pointer;
	}

	/* Override Chrome/Edge Autofill background */
	input:-webkit-autofill,
	input:-webkit-autofill:hover,
	input:-webkit-autofill:focus,
	input:-webkit-autofill:active {
		/* 
		   Strategy: Use a long transition to prevent the browser from applying 
		   the default yellow background color. This preserves the transparency 
		   and the custom background-image (tech lines).
		   
		   IMPORTANT: We use !important here because .tech-input-base (in components layer)
		   has 'transition-all duration-300' which overrides this if we don't force it.
		*/
		transition: background-color 5000s ease-in-out 0s !important;

		/* Fix text color visibility */
		-webkit-text-fill-color: var(--foreground) !important;

		/* Force border to match tech-input-base (border-white/20) */
		border: 1px solid rgba(255, 255, 255, 0.2) !important;

		/* Ensure caret color matches */
		caret-color: var(--foreground);

		/* Ensure no shadow covers the background */
		-webkit-box-shadow: 0 0 0 0 transparent inset !important;
	}
}

@layer components {
	.rich-text {
		@apply text-sm;

		h1 {
			@apply text-2xl font-bold;
		}
		h2 {
			@apply text-xl font-semibold mt-3;
		}
		h3 {
			@apply text-lg font-medium mt-2;
		}
		> p {
			@apply leading-relaxed;
		}
		ul {
			@apply list-disc pl-6 mb-3;
		}
		li {
			@apply mb-0;
		}
		ol {
			@apply list-decimal pl-6 mb-3;
		}
		a {
			@apply text-primary underline underline-offset-4 hover:text-primary/80;
		}
		blockquote {
			@apply border-l-4 border-muted pl-4 italic my-4;
		}
	}

	.tech-input-base {
		@apply relative transition-all duration-300 border border-border bg-transparent rounded-none;
		background-image: linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent)),
			linear-gradient(var(--accent), var(--accent));

		background-size: 0px 2px, 2px 0px, 0px 2px, 2px 0px, 0px 2px, 2px 0px,
			0px 2px, 2px 0px;

		background-position: center top, left center, center top, right center,
			center bottom, right center, center bottom, left center;

		background-repeat: no-repeat;
	}

	.tech-input-base:hover,
	.tech-input-base:focus,
	.tech-input-base:focus-within,
	.tech-input-base[data-state="open"],
	.tech-input-base[aria-expanded="true"] {
		@apply outline-none ring-0 shadow-none border-border;
		background-size: 10px 2px, 2px 10px, 10px 2px, 2px 10px, 10px 2px, 2px 10px,
			10px 2px, 2px 10px;

		background-position: left top, left top, right top, right top, right bottom,
			right bottom, left bottom, left bottom;
	}

	.tech-input-base[aria-invalid="true"] {
		background-image: linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive)),
			linear-gradient(var(--destructive), var(--destructive));
	}

	.btn-shine {
		position: relative;
		overflow: hidden;
	}

	.btn-shine::after {
		background: #fff;
		content: "";
		height: 155px;
		left: -75px;
		opacity: 0.2;
		position: absolute;
		top: -50px;
		transform: rotate(35deg);
		transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1);
		width: 50px;
		z-index: -10;
	}

	.btn-shine:hover::after {
		left: 120%;
		transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1);
	}
}

@layer utilities {
	.container {
		@apply mx-auto max-w-7xl;
	}
}
